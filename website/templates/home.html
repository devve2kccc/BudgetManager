{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block content %}
<div class="container-box">
<ul class="list-group" id="expense-box">
  <li class="list-group-item active">Total Expenses</li>
  <li class="list-group-item">{{ total_expenses }}</li>
</ul>
<ul class="list-group" id="income-box">
  <li class="list-group-item active">Total Income</li>
  <li class="list-group-item">{{ total_income }}</li>
</ul>
</div>
<div class="button-container">
  <button id="addexpense-btn" class="btn btn-primary">Add Expenses</button>
  <button id="addincome-btn" class="btn btn-primary">Add Income</button>
</div>
<div id="addexpensemodal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <form method="POST">
      <div class="inputDiv">
        <h5>Expense Name</h5>
        <textarea name="transactionname" id="transactionname" class="form-control"></textarea>
        <h5>Amount</h5>
        <textarea name="amount" id="amount" class="form-control"></textarea>
        <div>
          <label for="date">Date:</label>
          <input type="date" id="date" name="date" required />
        </div>
        <div>
          <label for="category">Category:</label>
          <select id="category" name="category">
            <option value="">Select an existing category</option>
            <option value="food">Food and Dining</option>
            <option value="transportation">Transportation</option>
            <option value="housing">Housing</option>
            <option value="health">Health and Wellness</option>
            <option value="entertainment">Entertainment</option>
            <option value="travel">Travel</option>
            <option value="personal_care">Personal Care</option>
            <option value="education">Education</option>
            <option value="gifts">Gifts and Donations</option>
            <option value="miscellaneous">Miscellaneous</option>
          </select>
        </div>
        <div>
          <label for="custom_category">Or enter a custom category:</label>
          <input type="text" id="custom_category" name="custom_category">
        </div>
        <div>
          <label for="payment_method">Payment Method:</label>
          <select id="payment_method" name="payment_method">
            <option value="cash">Cash</option>
            <option value="bank">Bank</option>
          </select>
        </div>
        <div>
          <label for="bank">Bank:</label>
          <select id="bank" name="bank">
            <option value="">Select a bank</option>
            {% for bank in banks %}
              <option value="{{ bank.id }}">{{ bank.bankname }}</option>
            {% endfor %}
          </select>
        </div>
        <input type="hidden" name="transaction_type" value="Expense">
        <button type="submit" class="btn btn-primary">Add</button>
      </div>
    </form>
  </div>
</div>
<div id="addincomemodal" class="modal">
  <div class="modal-content">
    <span class="closein">&times;</span>
    <form method="POST">
      <div class="inputDiv">
        <h5>Income</h5>
        <textarea name="transactionname" id="transactionname" class="form-control"></textarea>
        <h5>Amount</h5>
        <textarea name="amount" id="amount" class="form-control"></textarea>
        <div>
          <label for="date">Date:</label>
          <input type="date" id="date" name="date" required />
        </div>
        <div>
          <label for="category">Category:</label>
          <select id="category" name="category">
            <option value="">Select an existing category</option>
            <option value="job">JOB</option>
            <option value="transportation">Transportation</option>
            <option value="housing">Housing</option>
          </select>
        </div>
        <div>
          <label for="custom_category">Or enter a custom category:</label>
          <input type="text" id="custom_category" name="custom_category">
        </div>
        <div>
          <label for="payment_method">Payment Method:</label>
          <select id="payment_method" name="payment_method">
            <option value="cash">Cash</option>
            <option value="bank">Bank</option>
          </select>
        </div>
        <div>
          <label for="bank">Bank:</label>
          <select id="bank" name="bank">
            <option value="">Select a bank</option>
            {% for bank in banks %}
              <option value="{{ bank.id }}">{{ bank.bankname }}</option>
            {% endfor %}
          </select>
        </div>
        <input type="hidden" name="transaction_type" value="Income">
        <button type="submit" class="btn btn-primary">Add</button>
      </div>
    </form>
  </div>
</div>
<br />
<br />
<br />
<br />
<div class="filter-options">
  <label for="filter">Filter by:</label>
  <select id="filter" name="filter">
    <option value="all">All</option>
    <option value="month">Month</option>
    <option value="week">Week</option>
    <option value="day">Day</option>
    <option value="range">Range</option>
  </select>
  <input type="date" id="start-date" name="start-date" style="display: none;">
  <input type="date" id="end-date" name="end-date" style="display: none;">
  <button id="filter-button" class="btn btn-primary">Filter</button>
</div>
<div class="container-table">
  <table id="data" class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Amount</th>
        <th>Category</th>
        <th>Date</th>
        <th>Type</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for money in transactions %}
      <tr class="{% if money.transaction_type == 'Expense' %}expense{% elif money.transaction_type == 'Income' %}income{% endif %}">
        <td>{{ money.transaction_id }}</td>
        <td>{{ money.transaction_name }}</td>
        <td>{{ money.amount }}</td>
        <td>{{ money.category }}</td>
        <td>{{ money.date }}</td>
        <td>{{ money.transaction_type }}</td>
        <td>
          <button class="btn btn-danger" onclick="deleteTransaction({{ money.id }})">Delete</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}